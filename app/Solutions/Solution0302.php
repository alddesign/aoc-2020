<?php
declare(strict_types = 1);
namespace Alddesign\EzMvc\Solutions;

use Alddesign\EzMvc\System\Helper;

class Solution0302 extends Solution
{
    public $ready = true;
    
    private const INPUT = 
    [
        '.....#....#...#.#..........#...',
        '...#.................#.........',
        '......#...#.#.#.....#..#.....#.',
        '.........#.#.............##....',
        '#..####..#..#.##.....#.........',
        '...#........#..##...........#..',
        '..##.#.#..#....#..#......#.#...',
        '.......#.##....#.....###....#.#',
        '.#..#...#......#..#....##.#....',
        '...#...............#.#.....#...',
        '..#............#..#.........#.#',
        '#.#.#.............##.#......#..',
        '#...#..............##...#.#....',
        '...#....#................#.#..#',
        '..#.#..#.#.#..#.....#.........#',
        '#.............#..#..........#..',
        '.#...#.#........###.#....#...#.',
        '#......#....#.#..#.##..#.......',
        '.##......###.#......#..##...#..',
        '#..#....#........#......#.#....',
        '.#..................#.....#.###',
        '.#......#.#.#.....#...#.#......',
        '....#.............#.#..........',
        '....#..#.#........#..###.......',
        '.....#....#...#........#.......',
        '...........#.###....##.......#.',
        '....#...........#.#..#...#.....',
        '...........#.....#.#...........',
        '.....#........#.....#.#..#....#',
        '#.#......#.......#.......#.....',
        '..........#.............#.#.#..',
        '#...#..........#....#....#.....',
        '.#.#......#..##...#.....#...##.',
        '.#....#...#.#.......#.#........',
        '....#....##.##...#.............',
        '#...#....#..#.........#........',
        '...#.....#.#...#.......#..#....',
        '#.......#...#....##........#..#',
        '####........#........#....#.#..',
        '............##..........#......',
        '.......#.....#.#.#.##..#...#...',
        '..........#....#...##.........#',
        '..##..####.......##......#.##..',
        '.....#.#......##...#..#...#....',
        '....#.#.#.........#........#...',
        '...........###...#.........##..',
        '.......#.#....#......#.##...##.',
        '.................#...##.#...##.',
        '.......#.......#..#.#..........',
        '.#....#..#....#........#.......',
        '...............#.##..#...##..#.',
        '.###.#....#......#...#.#.....#.',
        '.#.....##.......#.......#......',
        '....#..#.....#.....#...........',
        '.......#....#.................#',
        '.......#.##...#...#......#.....',
        '.#.....#...####.............#..',
        '......#.........#..........#...',
        '.........#....#....#........###',
        '....#.........#......##.....#..',
        '....#........##...##.....##...#',
        '.#..#....#..........#...#.###.#',
        '#..#......#...#........#.......',
        '...#.........................#.',
        '.............#........#........',
        '.......#.#.#.....##.....#..#...',
        '..##..##.........#.............',
        '.#...#..#......#...##..##..###.',
        '.....#....#...#...##.##........',
        '.#.#..#...........#..#..#......',
        '##..#...#..#...##..#....#......',
        '...#...#...#.........#....###..',
        '...##..#....#.#.#.......#...#..',
        '..#.#.....#..#....#..##.......#',
        '.....#.#.....#......#....#.#...',
        '.......##....#.....#...#.....#.',
        '..##..#.................#.#....',
        '..............##....##.#..##...',
        '.#..#.....#....#.#.#...........',
        '......#.#.#..#..#...#.....#..##',
        '..#.........#.#.......###...##.',
        '#.....#...........#.....#.##.#.',
        '#..........#....#....#..#....#.',
        '.#.....#...#.......###......#..',
        '....##..##......#....#....#....',
        '.......#.#.............#....#.#',
        '.#..#.##.##.##....#.#.....##.##',
        '....#..##.#..#.............##..',
        '....#...........#...#....#..#..',
        '...........#..#....#....##.#.##',
        '......#....#....#.....#......#.',
        '.##.##....#.....#.#......#...#.',
        '.....##.......#.#.#........##..',
        '#..........##..#....#..#.#....#',
        '...#...........................',
        '...#..#...#..#.#.#.#.......#.#.',
        '.....#.........#..###..........',
        '...#.#......##....#......#..###',
        '#..............#....#.......#..',
        '.........##......###..###......',
        '..#......##...........#.##.....',
        '#.#..#......#...##.............',
        '......#.#.............#....#..#',
        '#.....##..#.#.................#',
        '..##....#.....#....#.....###...',
        '.#.#.##.....#..................',
        '.#......#.#.#.....#..#....#....',
        '..#.#.....##.#...#..#.#.##.....',
        '..#.#..#......##.#.#..........#',
        '.......##.....#..#...#....##.#.',
        '...#.....#..........#..........',
        '......................##......#',
        '...###.........##.........#....',
        '....#..................#.....#.',
        '.##..#.............#........##.',
        '....#....#...###..........#....',
        '.....#.#..........###..........',
        '..#......##......#.#.##.#..#...',
        '##...........#.#..#.....#..#...',
        '.........#......#..........#.#.',
        '...#.##.#..#..###..#...........',
        '....##.#.##...........#.....##.',
        '....#...................###....',
        '#.......#......#......#.....#..',
        '#..........##..................',
        '...#..#.#....#..#.........##.#.',
        '......#...##.#...............#.',
        '.........#....#.#...#..#..#....',
        '...#......###..#......#.....#.#',
        '#..###.#.............#.........',
        '......#...........#............',
        '..#..#.##.....#......#.#..#...#',
        '.........#..............#......',
        '........#.....#..#...#.....#..#',
        '.....................#........#',
        '.##.......##...#.###.........#.',
        '.#...#.......#.#....##....#....',
        '........#......#...........#.#.',
        '....#......##...#.....#...#...#',
        '..#.........#.#...............#',
        '....#.....#......#.............',
        '.............##.....#....#.....',
        '........#......#.#.....#....#..',
        '#.........#...#......#....#...#',
        '.#........###...#.#.#...#....#.',
        '.###...........#..#............',
        '....##.........#..#...##.#..###',
        '.####..#.#...............##.#..',
        '#.....#...#....#.......##....#.',
        '..#.....##...##.#...#..#.......',
        '..#.###.......#.....#.......#..',
        '...........#.......#....##....#',
        '..#...#....##........###......#',
        '...#..#..............#...#.....',
        '##.#.............#....##.#..##.',
        '##.#..#..............#.#.......',
        '.......#....#....##............',
        '.##..##.#..........#.#...#.#...',
        '.........##.......##...#...#...',
        '............#...##....#...#....',
        '........#...#..#...#.##......#.',
        '..#...#.#.........#.#....#.....',
        '..#...#.#..#.......#.#.........',
        '.......#.....#...#.#..###....#.',
        '.#......#.#....#.#.####....#...',
        '.......##..#......#...#......##',
        '#####.....#........#.#.......#.',
        '.....#...#..#...#.#.....#..#...',
        '....#...#....##.....##....#.#..',
        '.#..#......#.####.....#....#..#',
        '...#.......#..#.....##........#',
        '.#.....#.#.#.....##...#..#.....',
        '.............#...#..#.....#....',
        '...#.....##.......#...##..#...#',
        '..#.............#...#..#..##...',
        '...#........#........#...#...#.',
        '##..........#.#.#.............#',
        '....#....#..............#..#...',
        '....#..####..##....#.......#.#.',
        '.#..#.....##....#.#.....#...#..',
        '#............##..#..#.#......#.',
        '....#..........##..#...........',
        '..#.##.#.......#...#.##....#...',
        '....#.#.............#.#.##....#',
        '...#..#.#.#......#..#....#....#',
        '.............#...........#..#..',
        '#.............##.......#..###..',
        '..##....#.#.#...#...#....#...#.',
        '##.......####........##..#.....',
        '.###..#..#..#..#...#.#.........',
        '............#............#.....',
        '#...#.....#.#.##.##...#.......#',
        '#........#....#...#.........#..',
        '#....#.#......#.............#..',
        '....#............#......##...#.',
        '.......#........#..#.......#..#',
        '#.#...#.#.#..#..#........#....#',
        '#.#.##...........#.....#.....#.',
        '.#...##.#..#...................',
        '###...#.#.....................#',
        '.#....##...##.#....#..#........',
        '........###...#.#....##...#..##',
        '...#..#..........###..#.......#',
        '..#..##.............#.....#....',
        '....##..#..............#.......',
        '...##...##.#....#.#...#...#.#.#',
        '..#..........#.....##........#.',
        '.#.#.....#......#..#....#......',
        '...##.#....#.......#......#....',
        '...##..#........##......#..##..',
        '#..###...#...........#.#.......',
        '..##...#...#.#.#...#.#.....#...',
        '..#.....##.#....#.....#..#.....',
        '..#.#......#.......#...........',
        '....##......##.............#..#',
        '.......#.........##...#..#...#.',
        '.#........#.##.#.....#.#.......',
        '#..#...#..#.....##...........#.',
        '..##..............#....#.......',
        '.#..#....#.#...........#..##.#.',
        '#....#..###..........#...#.....',
        '.......#...##........#.#...###.',
        '....#..#......##......#.....#..',
        '.#..##..#..#......#......#.##..',
        '....#.#...........#..#.#.##.#..',
        '.....#......#.....#.....#..#...',
        '..........#...........#...##...',
        '#..#.#.#..#....#.....##......##',
        '..#.....#.....#................',
        '...#.#..##.........#..#..##....',
        '.#.....##..#.#.#.#.....#.......',
        '...........##...#..............',
        '...#.#....##..#.............###',
        '...#.#...........#.........#...',
        '#.....#.....##..#.#.#.#....#...',
        '##..................##.##......',
        '......#.....#....#.....#..#...#',
        '.............#.......#....#..##',
        '.#..#.##..#..#.........##...#..',
        '..#.#....#........#....#....##.',
        '.#.#.#.#.#.......#.......#..#..',
        '#.....#..##..#.........#.......',
        '.............#.#..............#',
        '.........#......#....#.#......#',
        '.........#.#...##..#.#.........',
        '...........#..........#........',
        '.......#...#...#......#..#.....',
        '#.....#...............#.....#.#',
        '..#....#..........#.#...#..#...',
        '#....##..#..#.....#.#..#.#.....',
        '.#....#..###............##.....',
        '......#.##...........#....#..#.',
        '...#........##....#...#...#....',
        '..#.#.#.....#..#.#..........##.',
        '..................#...........#',
        '##........#.#......#.#.......#.',
        '......#..#.............##......',
        '.#..###..#...###......#....#..#',
        '..#...........#...#...##..#...#',
        '..#..........#..............#..',
        '.....#.........................',
        '..#.#..##...........##...#.....',
        '...........#......##.....##....',
        '......#.......#................',
        '.........#.......#.#...........',
        '#......#...#........##.....##..',
        '...#.....#....#..#.....#.......',
        '....#.#......#...#..#.##.##...#',
        '..#..#.#.....#...#...........#.',
        '.#....##.####.....#..........##',
        '...##.##.....##..###...#.......',
        '.......#.#...#....#.......#..#.',
        '.#..#.###.#.............#......',
        '.###.........####..#...........',
        '#..#.#.###.....#.......#.......',
        '.#.....#.....#.....#.........#.',
        '..#...#......#.......##.###....',
        '.......##.............##.#.....',
        '.....................#.....##.#',
        '##.#...#........#..##........#.',
        '...#..........#.#.#..#......###',
        '.#....#.#.#..........##........',
        '....#....####....#.#....#..#.#.',
        '..#.........#....##..........##',
        '...##.#.......##.#.......#.#...',
        '........#..#......#...#.#.....#',
        '.....##............#.#.......#.',
        '.........##...##..#.....#..#...',
        '#...#....#........#...#....##.#',
        '..#.....#..........#...##.....#',
        '.##..#.........#...........#...',
        '.....##.#.#.#.#..#...#.....#.#.',
        '.#..#..##.........#.......#...#',
        '#....#.....#...#....#.........#',
        '...#..#.......#.........#......',
        '.#....##..#......##.#.#......#.',
        '....##.##...........#...#......',
        '..#.#....#.##...#......#.......',
        '...#........#.............#....',
        '...##....................#.###.',
        '.#.......#.........#......##...',
        '....#..#..............#....#...',
        '....##.#............#..........',
        '.#...#....#...##..........#....',
        '....#............#.....#.......',
        '.......#........#..............',
        '....#.#....#.#..#..#...........',
        '......................#.#......',
        '#......##.....#..#.......##....',
        '...#........#........#.#...##..',
        '##.#....##....#................',
        '#..#....#..............#.##....',
        '......#........#...........#...',
        '#....##.##...#...#..#...##.....',
        '............#............#..#..',
        '#....#...#..#..#.#...........#.',
        '.......#..........#..........##',
        '.....#......#....##.#..........',
        '.#....#....#....#....#..#...#..',
        '.....###....#...#.#.#........#.',
        '.......#...#..........##..#...#',
        '..##........................##.',
        '.....#....#..............#....#'
    ];
    
    public function run()
    {
        set_time_limit(0);
        
        $trees = 1;
        $trees *= $this->goDown(1,1);
        $trees *= $this->goDown(3,1);
        $trees *= $this->goDown(5,1);
        $trees *= $this->goDown(7,1);
        $trees *= $this->goDown(1,2);

        echo "End result: <b>$trees</b>";
    }

    private static function goDown(int $r, int $d)
    {
        $input = self::INPUT;

        $rows = count($input);
        $rowLen = strlen($input[0]);


        //Expanding the map
        $expandTimes = intval(ceil( (($rows/$d)*$r) / $rowLen) );
        foreach($input as $key => $value)
        {
            for($c = 0; $c < $expandTimes-1; $c++)
            {
                $input[$key] .= $value;
            }
        }

        //Going donw
        $trees = 0;
        $p0 = 0;
        $p1 = 0;
        while($p0 < $rows)
        {
           $trees += $input[$p0][$p1] === '#' ? 1 : 0;
           $p0 += $d;
           $p1 += $r;
        }

        echo "With the path $r right and $d down there are <b>$trees</b> trees!<br>";
        return $trees;
    }
}